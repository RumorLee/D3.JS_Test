<html>
<head>
    <meta charset="utf-8">
</head>
<body>
    
        <script src="//d3js.org/d3.v3.min.js" charset="utf-8"></script>
        <script>
            var s = d3.select('body')
                .append('svg')
                .attr({
                    'width': 800,
                    'height': 600
                });

            var data = [

                { name: 'bberbowei', count: ['17370', '414', '791', '92', '1169', '225', '1012', '86', '940', '176', '85', '76', '92', '1698', '969', '226', '139', '304', '1539', '1286', '430', '318', '125', '107', '75', '158', '1355', '1128', '884', '1192', '279'], rank: 1 },
                { name: '87_small_bear', count: ['11773', '0', '150', '28', '1091', '132', '0', '0', '1047', '101', '29', '27', '0', '405', '614', '113', '0', '60', '1291', '1007', '89', '22', '11', '14', '59', '44', '1742', '1294', '680', '1623', '100'], rank: 2 },
                { name: '好奇貓_瑾', count: ['11337', '243', '429', '228', '620', '386', '792', '455', '644', '443', '251', '252', '177', '993', '511', '304', '241', '194', '648', '392', '385', '258', '181', '112', '80', '122', '582', '0', '486', '610', '318'], rank: 3 },
                { name: '幻音星夢', count: ['10493', '707', '588', '501', '419', '609', '728', '718', '447', '461', '343', '307', '213', '280', '396', '107', '110', '327', '725', '146', '195', '161', '115', '258', '219', '347', '231', '254', '277', '156', '148'], rank: 4 },
                { name: '星痕夜', count: ['9446', '21', '392', '17', '522', '25', '524', '48', '604', '51', '65', '88', '93', '1256', '279', '82', '58', '109', '908', '526', '49', '37', '35', '77', '97', '133', '1154', '847', '328', '861', '160'], rank: 5 },
                { name: '零醬', count: ['8489', '0', '589', '0', '0', '99', '523', '0', '510', '53', '15', '0', '28', '1411', '513', '133', '0', '0', '1080', '742', '133', '0', '13', '24', '0', '77', '874', '502', '551', '552', '67'], rank: 6 },
                { name: '游樂福', count: ['8336', '306', '416', '402', '503', '429', '464', '279', '361', '292', '195', '99', '199', '397', '318', '222', '106', '169', '359', '508', '448', '251', '94', '183', '220', '430', '270', '0', '257', '0', '159'], rank: 7 },
                { name: '聊甜柿華起來', count: ['8037', '43', '401', '37', '590', '85', '569', '21', '504', '0', '15', '134', '76', '786', '133', '32', '73', '88', '649', '587', '83', '84', '62', '68', '74', '89', '750', '657', '244', '923', '180'], rank: 8 },
                { name: 'suleyman0604', count: ['7996', '660', '0', '0', '0', '189', '184', '96', '112', '196', '98', '35', '158', '0', '522', '504', '226', '286', '367', '396', '638', '686', '346', '403', '197', '398', '0', '472', '543', '0', '284'], rank: 9 },
                { name: 'Druidprime', count: ['7417', '375', '487', '153', '653', '234', '419', '191', '288', '256', '117', '187', '47', '466', '438', '104', '110', '182', '495', '376', '122', '227', '52', '242', '140', '110', '356', '0', '213', '239', '138'], rank: 10 },
                { name: 'gakki1017', count: ['7395', '68', '0', '95', '289', '77', '0', '37', '385', '82', '50', '61', '31', '812', '264', '134', '124', '97', '943', '441', '78', '67', '22', '56', '142', '66', '808', '1049', '446', '616', '55'], rank: 11 },
                { name: 'kyleming', count: ['6510', '168', '211', '155', '350', '196', '324', '249', '260', '186', '71', '149', '121', '276', '304', '206', '143', '235', '361', '416', '252', '209', '100', '167', '133', '157', '268', '0', '404', '251', '188'], rank: 12 },
                { name: '雷電戰士', count: ['5889', '21', '319', '77', '534', '140', '430', '12', '383', '130', '92', '36', '0', '782', '425', '129', '12', '59', '523', '361', '52', '35', '0', '0', '0', '0', '386', '388', '226', '337', '0'], rank: 13 },
                { name: '某瀚', count: ['4209', '0', '295', '0', '375', '21', '181', '0', '321', '0', '0', '0', '0', '306', '180', '0', '0', '24', '0', '362', '0', '31', '0', '0', '0', '0', '501', '660', '511', '441', '0'], rank: 14 },
                { name: '夏靜', count: ['4052', '0', '142', '0', '210', '0', '346', '0', '404', '0', '0', '0', '0', '676', '272', '0', '0', '0', '244', '230', '0', '0', '0', '0', '0', '0', '526', '587', '207', '208', '0'], rank: 15 },
                { name: 'seek82', count: ['3921', '81', '150', '121', '213', '124', '152', '68', '174', '125', '75', '68', '34', '0', '132', '76', '112', '198', '278', '174', '119', '127', '101', '125', '145', '196', '259', '215', '0', '197', '82'], rank: 16 },
                { name: 'Nightbot', count: ['3593', '117', '0', '122', '0', '68', '0', '65', '117', '134', '142', '115', '91', '259', '191', '160', '130', '171', '321', '346', '137', '111', '101', '128', '118', '130', '0', '0', '167', '0', '152'], rank: 17 },
                { name: '蟑螂嗄抓', count: ['3276', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '38', '171', '99', '91', '243', '182', '569', '496', '403', '665', '319'], rank: 18 },
                { name: '好運', count: ['2955', '164', '0', '15', '280', '14', '195', '86', '157', '209', '97', '0', '51', '288', '127', '68', '60', '23', '212', '0', '0', '0', '4', '27', '0', '18', '252', '378', '184', '0', '46'], rank: 19 },
                { name: '威廉ていい', count: ['2860', '0', '250', '0', '339', '0', '209', '0', '207', '0', '0', '0', '0', '350', '0', '0', '0', '0', '248', '164', '0', '0', '0', '0', '0', '0', '338', '331', '152', '249', '23'], rank: 20 }
            ];

            console.log(data)

            s.selectAll('text')
                .data(data)
                .enter()
                .append('text')
                .text(function (d) {
                    return d['name'];
                })
                .attr({
                    'x': function (d) {
                        return 0;
                    },
                    'y': function (d) {
                        return d['rank'] * 25 + 17;
                    }
                })

            s.selectAll('rect')
                .data(data)
                .enter()
                .append('rect')
                .attr({
                    'fill': '#aa4c8f',
                    'width': 0,
                    'height': 20,
                    'x': 150,
                    'y': function (d) {
                        return d['rank'] * 25;
                    },
                }).transition()
                .duration(1500)
                .attr({
                    'width': function (d) {
                        return d['count'][0]/100+100;
                    }
                });

            s.selectAll('text')
                .data(data)
                .enter()
                .append('text')
                .text(0)
                .attr({
                    'x': function (d) {
                        return 150;
                    },
                    'y': function (d) {
                        return d['rank'] * 25 + 17;
                    }
                }).transition()
                .duration(1500)
                .attr({
                    'x': function (d) {
                        return d['count'][0]/100 + 160;
                    }
                })
                .tween('number', function (d) {
                    var i = d3.interpolateRound(150, d['count'][0]/100+150);
                    return function (t) {
                        this.textContent = i(t);
                    };
                });

        </script>
        
</body>
</html>  
